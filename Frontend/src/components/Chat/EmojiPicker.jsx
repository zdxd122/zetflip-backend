import { useState, useMemo, useCallback, memo } from "react";
import { m } from "framer-motion";
import "./EmojiPicker.css";
import "flag-icons/css/flag-icons.min.css";

// Country flag mapping for flag-icons
const flagMapping = {
  "ðŸ‡ºðŸ‡¸": "fi fi-us",
  "ðŸ‡¬ðŸ‡§": "fi fi-gb",
  "ðŸ‡¨ðŸ‡¦": "fi fi-ca",
  "ðŸ‡¦ðŸ‡º": "fi fi-au",
  "ðŸ‡©ðŸ‡ª": "fi fi-de",
  "ðŸ‡«ðŸ‡·": "fi fi-fr",
  "ðŸ‡®ðŸ‡¹": "fi fi-it",
  "ðŸ‡¯ðŸ‡µ": "fi fi-jp",
  "ðŸ‡°ðŸ‡·": "fi fi-kr",
  "ðŸ‡¨ðŸ‡³": "fi fi-cn",
  "ðŸ‡®ðŸ‡³": "fi fi-in",
  "ðŸ‡§ðŸ‡·": "fi fi-br",
  "ðŸ‡·ðŸ‡º": "fi fi-ru",
  "ðŸ‡ªðŸ‡¸": "fi fi-es",
  "ðŸ‡³ðŸ‡±": "fi fi-nl",
  "ðŸ‡§ðŸ‡ª": "fi fi-be",
  "ðŸ‡¨ðŸ‡­": "fi fi-ch",
  "ðŸ‡¦ðŸ‡¹": "fi fi-at",
  "ðŸ‡¸ðŸ‡ª": "fi fi-se",
  "ðŸ‡³ðŸ‡´": "fi fi-no",
  "ðŸ‡©ðŸ‡°": "fi fi-dk",
  "ðŸ‡«ðŸ‡®": "fi fi-fi",
  "ðŸ‡µðŸ‡±": "fi fi-pl",
  "ðŸ‡¨ðŸ‡¿": "fi fi-cz",
  "ðŸ‡­ðŸ‡º": "fi fi-hu",
  "ðŸ‡µðŸ‡¹": "fi fi-pt",
  "ðŸ‡¬ðŸ‡·": "fi fi-gr",
  "ðŸ‡¹ðŸ‡·": "fi fi-tr",
  "ðŸ‡²ðŸ‡½": "fi fi-mx",
  "ðŸ‡¦ðŸ‡·": "fi fi-ar",
  "ðŸ‡¨ðŸ‡´": "fi fi-co",
  "ðŸ‡¨ðŸ‡±": "fi fi-cl",
  "ðŸ‡µðŸ‡ª": "fi fi-pe",
  "ðŸ‡»ðŸ‡ª": "fi fi-ve",
  "ðŸ‡ªðŸ‡¨": "fi fi-ec",
  "ðŸ‡ºðŸ‡¾": "fi fi-uy",
  "ðŸ‡µðŸ‡¾": "fi fi-py",
  "ðŸ‡§ðŸ‡´": "fi fi-bo",
  "ðŸ‡¸ðŸ‡»": "fi fi-sv",
  "ðŸ‡¬ðŸ‡¹": "fi fi-gt",
  "ðŸ‡­ðŸ‡³": "fi fi-hn",
  "ðŸ‡³ðŸ‡®": "fi fi-ni",
  "ðŸ‡¨ðŸ‡·": "fi fi-cr",
  "ðŸ‡µðŸ‡¦": "fi fi-pa",
  "ðŸ‡©ðŸ‡´": "fi fi-do",
  "ðŸ‡¯ðŸ‡²": "fi fi-jm",
  "ðŸ‡­ðŸ‡¹": "fi fi-ht",
  "ðŸ‡¨ðŸ‡º": "fi fi-cu",
  "ðŸ‡µðŸ‡·": "fi fi-pr",
  "ðŸ‡§ðŸ‡§": "fi fi-bb",
  "ðŸ‡¹ðŸ‡¹": "fi fi-tt",
  "ðŸ‡¬ðŸ‡¾": "fi fi-gy",
  "ðŸ‡¸ðŸ‡·": "fi fi-sr",
  "ðŸ‡¦ðŸ‡¼": "fi fi-aw",
  "ðŸ‡§ðŸ‡¶": "fi fi-bq",
  "ðŸ‡¨ðŸ‡¼": "fi fi-cw",
  "ðŸ‡¸ðŸ‡½": "fi fi-sx",
  "ðŸ‡§ðŸ‡±": "fi fi-bl",
  "ðŸ‡¬ðŸ‡«": "fi fi-gf",
  "ðŸ‡¬ðŸ‡µ": "fi fi-gp",
  "ðŸ‡²ðŸ‡¶": "fi fi-mq",
  "ðŸ‡¾ðŸ‡¹": "fi fi-yt",
  "ðŸ‡·ðŸ‡ª": "fi fi-re",
  "ðŸ‡µðŸ‡«": "fi fi-pf",
  "ðŸ‡³ðŸ‡¨": "fi fi-nc",
  "ðŸ‡¼ðŸ‡«": "fi fi-wf",
  "ðŸ‡µðŸ‡²": "fi fi-pm",
  "ðŸ‡¬ðŸ‡±": "fi fi-gl",
  "ðŸ‡«ðŸ‡´": "fi fi-fo",
  "ðŸ‡¦ðŸ‡½": "fi fi-ax",
  "ðŸ‡®ðŸ‡¸": "fi fi-is",
  "ðŸ‡®ðŸ‡ª": "fi fi-ie",
  "ðŸ‡±ðŸ‡º": "fi fi-lu",
  "ðŸ‡²ðŸ‡¨": "fi fi-mc",
  "ðŸ‡±ðŸ‡®": "fi fi-li",
  "ðŸ‡¦ðŸ‡©": "fi fi-ad",
  "ðŸ‡¸ðŸ‡²": "fi fi-sm",
  "ðŸ‡»ðŸ‡¦": "fi fi-va",
  "ðŸ‡²ðŸ‡¹": "fi fi-mt",
  "ðŸ‡¨ðŸ‡¾": "fi fi-cy",
  "ðŸ‡§ðŸ‡¬": "fi fi-bg",
  "ðŸ‡·ðŸ‡´": "fi fi-ro",
  "ðŸ‡­ðŸ‡·": "fi fi-hr",
  "ðŸ‡¸ðŸ‡®": "fi fi-si",
  "ðŸ‡²ðŸ‡ª": "fi fi-me",
  "ðŸ‡·ðŸ‡¸": "fi fi-rs",
  "ðŸ‡²ðŸ‡°": "fi fi-mk",
  "ðŸ‡¦ðŸ‡±": "fi fi-al",
  "ðŸ‡½ðŸ‡°": "fi fi-xk",
  "ðŸ‡§ðŸ‡¦": "fi fi-ba",
  "ðŸ‡²ðŸ‡©": "fi fi-md",
  "ðŸ‡ªðŸ‡ª": "fi fi-ee",
  "ðŸ‡±ðŸ‡»": "fi fi-lv",
  "ðŸ‡±ðŸ‡¹": "fi fi-lt",
  "ðŸ‡§ðŸ‡¾": "fi fi-by",
  "ðŸ‡ºðŸ‡¦": "fi fi-ua",
  "ðŸ‡¬ðŸ‡ª": "fi fi-ge",
  "ðŸ‡¦ðŸ‡²": "fi fi-am",
  "ðŸ‡¦ðŸ‡¿": "fi fi-az",
  "ðŸ‡°ðŸ‡¿": "fi fi-kz",
  "ðŸ‡°ðŸ‡¬": "fi fi-kg",
  "ðŸ‡¹ðŸ‡¯": "fi fi-tj",
  "ðŸ‡¹ðŸ‡²": "fi fi-tm",
  "ðŸ‡ºðŸ‡¿": "fi fi-uz",
  "ðŸ‡²ðŸ‡³": "fi fi-mn",
  "ðŸ‡°ðŸ‡µ": "fi fi-kp",
  "ðŸ‡¹ðŸ‡¼": "fi fi-tw",
  "ðŸ‡­ðŸ‡°": "fi fi-hk",
  "ðŸ‡²ðŸ‡´": "fi fi-mo",
  "ðŸ‡¯ðŸ‡´": "fi fi-jo",
  "ðŸ‡±ðŸ‡§": "fi fi-lb",
  "ðŸ‡¸ðŸ‡¾": "fi fi-sy",
  "ðŸ‡®ðŸ‡¶": "fi fi-iq",
  "ðŸ‡°ðŸ‡¼": "fi fi-kw",
  "ðŸ‡¸ðŸ‡¦": "fi fi-sa",
  "ðŸ‡§ðŸ‡­": "fi fi-bh",
  "ðŸ‡¶ðŸ‡¦": "fi fi-qa",
  "ðŸ‡¦ðŸ‡ª": "fi fi-ae",
  "ðŸ‡´ðŸ‡²": "fi fi-om",
  "ðŸ‡¾ðŸ‡ª": "fi fi-ye",
  "ðŸ‡®ðŸ‡±": "fi fi-il",
  "ðŸ‡µðŸ‡¸": "fi fi-ps",
  "ðŸ‡ªðŸ‡¬": "fi fi-eg",
  "ðŸ‡±ðŸ‡¾": "fi fi-ly",
  "ðŸ‡©ðŸ‡¿": "fi fi-dz",
  "ðŸ‡²ðŸ‡¦": "fi fi-ma",
  "ðŸ‡¹ðŸ‡³": "fi fi-tn",
  "ðŸ‡ªðŸ‡­": "fi fi-eh",
  "ðŸ‡²ðŸ‡·": "fi fi-mr",
  "ðŸ‡²ðŸ‡±": "fi fi-ml",
  "ðŸ‡¸ðŸ‡³": "fi fi-sn",
  "ðŸ‡¬ðŸ‡²": "fi fi-gm",
  "ðŸ‡¬ðŸ‡³": "fi fi-gn",
  "ðŸ‡¸ðŸ‡±": "fi fi-sl",
  "ðŸ‡±ðŸ‡·": "fi fi-lr",
  "ðŸ‡¨ðŸ‡®": "fi fi-ci",
  "ðŸ‡§ðŸ‡«": "fi fi-bf",
  "ðŸ‡¹ðŸ‡¬": "fi fi-tg",
  "ðŸ‡§ðŸ‡¯": "fi fi-bj",
  "ðŸ‡³ðŸ‡ª": "fi fi-ne",
  "ðŸ‡³ðŸ‡¬": "fi fi-ng",
  "ðŸ‡¹ðŸ‡©": "fi fi-td",
  "ðŸ‡¨ðŸ‡²": "fi fi-cm",
  "ðŸ‡¨ðŸ‡«": "fi fi-cf",
  "ðŸ‡¬ðŸ‡¦": "fi fi-ga",
  "ðŸ‡¨ðŸ‡¬": "fi fi-cg",
  "ðŸ‡¦ðŸ‡´": "fi fi-ao",
  "ðŸ‡¬ðŸ‡¶": "fi fi-gq",
  "ðŸ‡¸ðŸ‡¹": "fi fi-st",
  "ðŸ‡¨ðŸ‡»": "fi fi-cv",
  "ðŸ‡¬ðŸ‡¼": "fi fi-gw",
  "ðŸ‡§ðŸ‡®": "fi fi-bi",
  "ðŸ‡·ðŸ‡¼": "fi fi-rw",
  "ðŸ‡¹ðŸ‡¿": "fi fi-tz",
  "ðŸ‡°ðŸ‡ª": "fi fi-ke",
  "ðŸ‡ºðŸ‡¬": "fi fi-ug",
  "ðŸ‡¸ðŸ‡´": "fi fi-so",
  "ðŸ‡©ðŸ‡¯": "fi fi-dj",
  "ðŸ‡ªðŸ‡¹": "fi fi-et",
  "ðŸ‡ªðŸ‡·": "fi fi-er",
  "ðŸ‡¸ðŸ‡¸": "fi fi-ss",
  "ðŸ‡¸ðŸ‡©": "fi fi-sd",
  "ðŸ‡¿ðŸ‡¦": "fi fi-za",
  "ðŸ‡§ðŸ‡¼": "fi fi-bw",
  "ðŸ‡¿ðŸ‡²": "fi fi-zm",
  "ðŸ‡¿ðŸ‡¼": "fi fi-zw",
  "ðŸ‡²ðŸ‡¼": "fi fi-mw",
  "ðŸ‡²ðŸ‡¿": "fi fi-mz",
  "ðŸ‡¸ðŸ‡¿": "fi fi-sz",
  "ðŸ‡±ðŸ‡¸": "fi fi-ls",
  "ðŸ‡³ðŸ‡¦": "fi fi-na",
  "ðŸ‡²ðŸ‡¬": "fi fi-mg",
  "ðŸ‡²ðŸ‡º": "fi fi-mu",
  "ðŸ‡¸ðŸ‡¨": "fi fi-sc",
  "ðŸ‡¹ðŸ‡´": "fi fi-to",
  "ðŸ‡¼ðŸ‡¸": "fi fi-ws",
  "ðŸ‡¸ðŸ‡§": "fi fi-sb",
  "ðŸ‡»ðŸ‡º": "fi fi-vu",
  "ðŸ‡³ðŸ‡·": "fi fi-nr",
  "ðŸ‡¹ðŸ‡»": "fi fi-tv",
  "ðŸ‡°ðŸ‡®": "fi fi-ki",
  "ðŸ‡²ðŸ‡­": "fi fi-mh",
  "ðŸ‡µðŸ‡¼": "fi fi-pw",
  "ðŸ‡«ðŸ‡²": "fi fi-fm",
  "ðŸ‡²ðŸ‡µ": "fi fi-mp",
  "ðŸ‡¬ðŸ‡º": "fi fi-gu",
  "ðŸ‡¦ðŸ‡¸": "fi fi-as",
  "ðŸ‡»ðŸ‡®": "fi fi-vi",
  "ðŸ‡ºðŸ‡²": "fi fi-um",
  "ðŸ‡²ðŸ‡¸": "fi fi-ms",
  "ðŸ‡¹ðŸ‡¨": "fi fi-tc",
  "ðŸ‡»ðŸ‡¬": "fi fi-vg",
  "ðŸ‡§ðŸ‡²": "fi fi-bm",
  "ðŸ‡°ðŸ‡¾": "fi fi-ky",
  "ðŸ‡¦ðŸ‡®": "fi fi-ai",
  "ðŸ‡«ðŸ‡°": "fi fi-fk",
  "ðŸ‡¬ðŸ‡¸": "fi fi-gs",
  "ðŸ‡¸ðŸ‡­": "fi fi-sh",
  "ðŸ‡®ðŸ‡´": "fi fi-io",
  "ðŸ‡µðŸ‡³": "fi fi-pn",
  "ðŸ‡¨ðŸ‡½": "fi fi-cx",
  "ðŸ‡¨ðŸ‡¨": "fi fi-cc",
  "ðŸ‡³ðŸ‡«": "fi fi-nf",
  "ðŸ‡¦ðŸ‡¶": "fi fi-aq",
  "ðŸ‡§ðŸ‡»": "fi fi-bv",
  "ðŸ‡­ðŸ‡²": "fi fi-hm",
  "ðŸ‡¹ðŸ‡«": "fi fi-tf"
};

const emojis = [
  // Faces & Emotions (100+ emojis)
  "ðŸ˜€", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜", "ðŸ˜†", "ðŸ˜…", "ðŸ¤£", "ðŸ˜‚", "ðŸ™‚", "ðŸ™ƒ", "ðŸ˜‰", "ðŸ˜Š", "ðŸ˜‡", "ðŸ¥°", "ðŸ˜", "ðŸ¤©", "ðŸ˜˜", "ðŸ˜—", "â˜ºï¸", "ðŸ˜š", "ðŸ˜™", "ðŸ¥²", "ðŸ˜‹", "ðŸ˜›", "ðŸ˜œ", "ðŸ¤ª", "ðŸ˜", "ðŸ¤‘", "ðŸ¤—", "ðŸ¤­", "ðŸ¤«", "ðŸ¤”", "ðŸ¤", "ðŸ¤¨", "ðŸ˜", "ðŸ˜‘", "ðŸ˜¶", "ðŸ™„", "ðŸ˜", "ðŸ˜’", "ðŸ™", "â˜¹ï¸", "ðŸ˜”", "ðŸ˜ª", "ðŸ˜´", "ðŸ˜·", "ðŸ¤’", "ðŸ¤•", "ðŸ¤¢", "ðŸ¤®", "ðŸ¤§", "ðŸ¥µ", "ðŸ¥¶", "ðŸ¥´", "ðŸ˜µâ€ðŸ’«", "ðŸ¤¯", "ðŸ¤ ", "ðŸ¥³", "ðŸ¥¸", "ðŸ˜Ž", "ðŸ¤“", "ðŸ§", "ðŸ˜•", "ðŸ˜Ÿ", "ðŸ˜®", "ðŸ˜¯", "ðŸ˜²", "ðŸ˜³", "ðŸ˜¦", "ðŸ˜§", "ðŸ˜¨", "ðŸ˜°", "ðŸ˜¥", "ðŸ˜¢", "ðŸ˜­", "ðŸ˜±", "ðŸ˜–", "ðŸ˜£", "ðŸ˜ž", "ðŸ˜“", "ðŸ˜©", "ðŸ˜«", "ðŸ¥±", "ðŸ˜¤", "ðŸ˜¡", "ðŸ˜ ", "ðŸ¤¬", "ðŸ˜ˆ", "ðŸ‘¿", "ðŸ’€", "â˜ ï¸", "ðŸ‘»", "ðŸ‘½", "ðŸ¤–", "ðŸ˜º", "ðŸ˜¸", "ðŸ˜¹", "ðŸ˜»", "ðŸ˜¼", "ðŸ˜½", "ðŸ™€", "ðŸ˜¿", "ðŸ˜¾", "ðŸ™ˆ", "ðŸ™‰", "ðŸ™Š",

  // Gestures & People (21+ emojis)
  "ðŸ‘‹", "ðŸ¤š", "ðŸ–ï¸", "âœ‹", "ðŸ––", "ðŸ‘Œ", "ðŸ¤Œ", "ðŸ¤", "âœŒï¸", "ðŸ¤ž", "ðŸ¤Ÿ", "ðŸ¤˜", "ðŸ¤™", "ðŸ‘ˆ", "ðŸ‘‰", "ðŸ‘†", "ðŸ–•", "ðŸ‘‡", "â˜ï¸", "ðŸ‘", "ðŸ™",

  // Hearts & Love (15+ emojis)
  "â¤ï¸", "ðŸ§¡", "ðŸ’›", "ðŸ’š", "ðŸ’™", "ðŸ’œ", "ðŸ–¤", "ðŸ¤", "ðŸ¤Ž", "ðŸ’”", "â¤ï¸â€ðŸ”¥", "â¤ï¸â€ðŸ©¹", "â£ï¸", "ðŸ’•", "ðŸ’ž",

  // Nature & Animals (20+ emojis)
  "ðŸ¶", "ðŸ±", "ðŸ­", "ðŸ¹", "ðŸ°", "ðŸ¦Š", "ðŸ»", "ðŸ¼", "ðŸ¨", "ðŸ¯", "ðŸ¦", "ðŸ®", "ðŸ·", "ðŸ½", "ðŸ¸", "ðŸµ", "ðŸ™ˆ", "ðŸ™‰", "ðŸ™Š", "ðŸ’",

  // Food & Drinks (100+ emojis)
  "ðŸŽ", "ðŸŠ", "ðŸ‹", "ðŸŒ", "ðŸ‰", "ðŸ‡", "ðŸ“", "ðŸ«", "ðŸˆ", "ðŸ’", "ðŸ‘", "ðŸ¥­", "ðŸ", "ðŸ¥¥", "ðŸ¥", "ðŸ…", "ðŸ†", "ðŸ¥‘", "ðŸ¥’", "ðŸ¥¬", "ðŸ¥¦", "ðŸ§„", "ðŸ§…", "ðŸ¥•", "ðŸŒ½", "ðŸŒ¶ï¸", "ðŸ«‘", "ðŸ„", "ðŸ¥œ", "ðŸŒ°", "ðŸ ", "ðŸ¥”",
  "ðŸ¥š", "ðŸ³", "ðŸ¥“", "ðŸ¥©", "ðŸ—", "ðŸ–", "ðŸ”", "ðŸŸ", "ðŸ ", "ðŸ¡", "ðŸ¦€", "ðŸ¦ž", "ðŸ¦", "ðŸ¦‘", "ðŸ¦ª", "ðŸ™", "ðŸš",
  "ðŸ§€", "ðŸ¥›", "ðŸ¼",
  "ðŸž", "ðŸ¥–", "ðŸ¥¨", "ðŸ¥¯", "ðŸ¥", "ðŸ¥ž", "ðŸ§‡",
  "ðŸ•", "ðŸ”", "ðŸŸ", "ðŸŒ­", "ðŸ¿", "ðŸ¥Ÿ", "ðŸ¥ ", "ðŸ¥¡", "ðŸ±", "ðŸ˜", "ðŸ™", "ðŸš", "ðŸ›", "ðŸœ", "ðŸ", "ðŸ¢", "ðŸ£", "ðŸ¤", "ðŸ¥", "ðŸ¥®", "ðŸ¥§", "ðŸ¦", "ðŸ¨", "ðŸ©", "ðŸª", "ðŸŽ‚", "ðŸ°", "ðŸ§", "ðŸ«", "ðŸ¬", "ðŸ­", "ðŸ®", "ðŸ¯",
  "â˜•", "ðŸ«–", "ðŸµ", "ðŸ§ƒ", "ðŸ¥¤", "ðŸ§‹", "ðŸ¶", "ðŸº", "ðŸ»", "ðŸ¥‚", "ðŸ·", "ðŸ¥ƒ", "ðŸ¸", "ðŸ¹", "ðŸ§‰", "ðŸ¾",
  "ðŸ¥„", "ðŸ´", "ðŸ½ï¸",
  "ðŸ¥™", "ðŸŒ¯", "ðŸ¥—", "ðŸ¥˜", "ðŸ«•", "ðŸ¥«", "ðŸ²",

  // Activities & Sports (15+ emojis)
  "âš½", "ðŸ€", "ðŸˆ", "âš¾", "ðŸ¥Ž", "ðŸŽ¾", "ðŸ", "ðŸ‰", "ðŸ¥", "ðŸŽ±", "ðŸª€", "ðŸ“", "ðŸ¸", "ðŸ’", "ðŸ‘",

  // Travel & Places (15+ emojis)
  "ðŸš—", "ðŸš•", "ðŸš™", "ðŸšŒ", "ðŸšŽ", "ðŸŽï¸", "ðŸš“", "ðŸš‘", "ðŸš’", "ðŸš", "ðŸšš", "ðŸš›", "ðŸšœ", "ðŸï¸", "ðŸ›µ",

  // Objects & Symbols (20+ emojis)
  "ðŸ”¥", "ðŸ’§", "ðŸŒŠ", "â­", "âœ¨", "ðŸ’«", "ðŸŒŸ", "ðŸŒ ", "ðŸŽ‡", "ðŸŽ†", "ðŸŽˆ", "ðŸŽ‰", "ðŸŽŠ", "ðŸŽ‚", "ðŸŽ", "ðŸŽ€", "ðŸŽ—ï¸", "ðŸŽŸï¸", "ðŸŽ«", "ðŸŽ–ï¸",

  // Weather & Nature (10+ emojis)
  "â˜€ï¸", "ðŸŒ¤ï¸", "â›…", "â˜ï¸", "ðŸŒ§ï¸", "â›ˆï¸", "ðŸŒ©ï¸", "â„ï¸", "ðŸŒ¨ï¸", "ðŸŒˆ",

  // Technology & Devices (10+ emojis)
  "ðŸ“±", "ðŸ“²", "â˜Žï¸", "ðŸ“ž", "ðŸ“Ÿ", "ðŸ“ ", "ðŸ“º", "ðŸ“»", "ðŸŽ™ï¸", "ðŸŽšï¸",

  // Flags & Symbols (200+ emojis)
  "ðŸ", "ðŸš©", "ðŸŽŒ", "ðŸ´", "ðŸ³ï¸", "ðŸ³ï¸â€ðŸŒˆ", "ðŸ³ï¸â€âš§ï¸", "ðŸ´â€â˜ ï¸",
  "ðŸ‡ºðŸ‡¸", "ðŸ‡¬ðŸ‡§", "ðŸ‡¨ðŸ‡¦", "ðŸ‡¦ðŸ‡º", "ðŸ‡©ðŸ‡ª", "ðŸ‡«ðŸ‡·", "ðŸ‡®ðŸ‡¹", "ðŸ‡¯ðŸ‡µ", "ðŸ‡°ðŸ‡·", "ðŸ‡¨ðŸ‡³", "ðŸ‡®ðŸ‡³", "ðŸ‡§ðŸ‡·",
  "ðŸ‡·ðŸ‡º", "ðŸ‡ªðŸ‡¸", "ðŸ‡³ðŸ‡±", "ðŸ‡§ðŸ‡ª", "ðŸ‡¨ðŸ‡­", "ðŸ‡¦ðŸ‡¹", "ðŸ‡¸ðŸ‡ª", "ðŸ‡³ðŸ‡´", "ðŸ‡©ðŸ‡°", "ðŸ‡«ðŸ‡®", "ðŸ‡µðŸ‡±", "ðŸ‡¨ðŸ‡¿", "ðŸ‡­ðŸ‡º", "ðŸ‡µðŸ‡¹", "ðŸ‡¬ðŸ‡·", "ðŸ‡¹ðŸ‡·",
  "ðŸ‡²ðŸ‡½", "ðŸ‡¦ðŸ‡·", "ðŸ‡¨ðŸ‡´", "ðŸ‡¨ðŸ‡±", "ðŸ‡µðŸ‡ª", "ðŸ‡»ðŸ‡ª", "ðŸ‡ªðŸ‡¨", "ðŸ‡ºðŸ‡¾", "ðŸ‡µðŸ‡¾", "ðŸ‡§ðŸ‡´", "ðŸ‡¸ðŸ‡»", "ðŸ‡¬ðŸ‡¹", "ðŸ‡­ðŸ‡³", "ðŸ‡³ðŸ‡®", "ðŸ‡¨ðŸ‡·", "ðŸ‡µðŸ‡¦",
  "ðŸ‡©ðŸ‡´", "ðŸ‡¯ðŸ‡²", "ðŸ‡­ðŸ‡¹", "ðŸ‡¨ðŸ‡º", "ðŸ‡µðŸ‡·", "ðŸ‡§ðŸ‡§", "ðŸ‡¹ðŸ‡¹", "ðŸ‡¬ðŸ‡¾", "ðŸ‡¸ðŸ‡·", "ðŸ‡¦ðŸ‡¼", "ðŸ‡§ðŸ‡¶", "ðŸ‡¨ðŸ‡¼", "ðŸ‡¸ðŸ‡½", "ðŸ‡§ðŸ‡±", "ðŸ‡¬ðŸ‡«", "ðŸ‡¬ðŸ‡µ",
  "ðŸ‡²ðŸ‡¶", "ðŸ‡¾ðŸ‡¹", "ðŸ‡·ðŸ‡ª", "ðŸ‡µðŸ‡«", "ðŸ‡³ðŸ‡¨", "ðŸ‡¼ðŸ‡«", "ðŸ‡µðŸ‡²", "ðŸ‡¬ðŸ‡±", "ðŸ‡«ðŸ‡´", "ðŸ‡¦ðŸ‡½", "ðŸ‡®ðŸ‡¸", "ðŸ‡®ðŸ‡ª", "ðŸ‡±ðŸ‡º", "ðŸ‡²ðŸ‡¨", "ðŸ‡±ðŸ‡®", "ðŸ‡¦ðŸ‡©",
  "ðŸ‡¸ðŸ‡²", "ðŸ‡»ðŸ‡¦", "ðŸ‡²ðŸ‡¹", "ðŸ‡¨ðŸ‡¾", "ðŸ‡§ðŸ‡¬", "ðŸ‡·ðŸ‡´", "ðŸ‡­ðŸ‡·", "ðŸ‡¸ðŸ‡®", "ðŸ‡²ðŸ‡ª", "ðŸ‡·ðŸ‡¸", "ðŸ‡²ðŸ‡°", "ðŸ‡¦ðŸ‡±", "ðŸ‡½ðŸ‡°", "ðŸ‡§ðŸ‡¦", "ðŸ‡²ðŸ‡©", "ðŸ‡ªðŸ‡ª",
  "ðŸ‡±ðŸ‡»", "ðŸ‡±ðŸ‡¹", "ðŸ‡§ðŸ‡¾", "ðŸ‡ºðŸ‡¦", "ðŸ‡¬ðŸ‡ª", "ðŸ‡¦ðŸ‡²", "ðŸ‡¦ðŸ‡¿", "ðŸ‡°ðŸ‡¿", "ðŸ‡°ðŸ‡¬", "ðŸ‡¹ðŸ‡¯", "ðŸ‡¹ðŸ‡²", "ðŸ‡ºðŸ‡¿", "ðŸ‡²ðŸ‡³", "ðŸ‡°ðŸ‡µ", "ðŸ‡¹ðŸ‡¼", "ðŸ‡­ðŸ‡°",
  "ðŸ‡²ðŸ‡´", "ðŸ‡¯ðŸ‡´", "ðŸ‡±ðŸ‡§", "ðŸ‡¸ðŸ‡¾", "ðŸ‡®ðŸ‡¶", "ðŸ‡°ðŸ‡¼", "ðŸ‡¸ðŸ‡¦", "ðŸ‡§ðŸ‡­", "ðŸ‡¶ðŸ‡¦", "ðŸ‡¦ðŸ‡ª", "ðŸ‡´ðŸ‡²", "ðŸ‡¾ðŸ‡ª", "ðŸ‡®ðŸ‡±", "ðŸ‡µðŸ‡¸", "ðŸ‡ªðŸ‡¬", "ðŸ‡±ðŸ‡¾",
  "ðŸ‡©ðŸ‡¿", "ðŸ‡²ðŸ‡¦", "ðŸ‡¹ðŸ‡³", "ðŸ‡ªðŸ‡­", "ðŸ‡²ðŸ‡·", "ðŸ‡²ðŸ‡±", "ðŸ‡¸ðŸ‡³", "ðŸ‡¬ðŸ‡²", "ðŸ‡¬ðŸ‡³", "ðŸ‡¸ðŸ‡±", "ðŸ‡±ðŸ‡·", "ðŸ‡¨ðŸ‡®", "ðŸ‡§ðŸ‡«", "ðŸ‡¹ðŸ‡¬", "ðŸ‡§ðŸ‡¯", "ðŸ‡³ðŸ‡ª",
  "ðŸ‡³ðŸ‡¬", "ðŸ‡¹ðŸ‡©", "ðŸ‡¨ðŸ‡²", "ðŸ‡¨ðŸ‡«", "ðŸ‡¬ðŸ‡¦", "ðŸ‡¨ðŸ‡¬", "ðŸ‡¦ðŸ‡´", "ðŸ‡¬ðŸ‡¶", "ðŸ‡¸ðŸ‡¹", "ðŸ‡¨ðŸ‡»", "ðŸ‡¬ðŸ‡¼", "ðŸ‡§ðŸ‡®", "ðŸ‡·ðŸ‡¼", "ðŸ‡¹ðŸ‡¿", "ðŸ‡°ðŸ‡ª", "ðŸ‡ºðŸ‡¬",
  "ðŸ‡¸ðŸ‡´", "ðŸ‡©ðŸ‡¯", "ðŸ‡ªðŸ‡¹", "ðŸ‡ªðŸ‡·", "ðŸ‡¸ðŸ‡¸", "ðŸ‡¸ðŸ‡©", "ðŸ‡¿ðŸ‡¦", "ðŸ‡§ðŸ‡¼", "ðŸ‡¿ðŸ‡²", "ðŸ‡¿ðŸ‡¼", "ðŸ‡²ðŸ‡¼", "ðŸ‡²ðŸ‡¿", "ðŸ‡¸ðŸ‡¿", "ðŸ‡±ðŸ‡¸", "ðŸ‡³ðŸ‡¦", "ðŸ‡²ðŸ‡¬",
  "ðŸ‡²ðŸ‡º", "ðŸ‡¸ðŸ‡¨", "ðŸ‡¹ðŸ‡´", "ðŸ‡¼ðŸ‡¸", "ðŸ‡¸ðŸ‡§", "ðŸ‡»ðŸ‡º", "ðŸ‡³ðŸ‡·", "ðŸ‡¹ðŸ‡»", "ðŸ‡°ðŸ‡®", "ðŸ‡²ðŸ‡­", "ðŸ‡µðŸ‡¼", "ðŸ‡«ðŸ‡²", "ðŸ‡²ðŸ‡µ", "ðŸ‡¬ðŸ‡º", "ðŸ‡¦ðŸ‡¸", "ðŸ‡»ðŸ‡®",
  "ðŸ‡ºðŸ‡²", "ðŸ‡²ðŸ‡¸", "ðŸ‡¹ðŸ‡¨", "ðŸ‡»ðŸ‡¬", "ðŸ‡§ðŸ‡²", "ðŸ‡°ðŸ‡¾", "ðŸ‡¦ðŸ‡®", "ðŸ‡«ðŸ‡°", "ðŸ‡¬ðŸ‡¸", "ðŸ‡¸ðŸ‡­", "ðŸ‡®ðŸ‡´", "ðŸ‡µðŸ‡³", "ðŸ‡¨ðŸ‡½", "ðŸ‡¨ðŸ‡¨", "ðŸ‡³ðŸ‡«", "ðŸ‡¦ðŸ‡¶",
  "ðŸ‡§ðŸ‡»", "ðŸ‡­ðŸ‡²", "ðŸ‡¹ðŸ‡«"
];

export default function EmojiPicker({ onEmojiSelect, isOpen, onClose }) {
  const [selectedCategory, setSelectedCategory] = useState("all");
  const [searchQuery, setSearchQuery] = useState("");

  const handleEmojiClick = useCallback((emoji) => {
    onEmojiSelect(emoji);
    onClose();
  }, [onEmojiSelect, onClose]);

  const handleSearchChange = useCallback((e) => {
    setSearchQuery(e.target.value);
  }, []);

  // Emoji name mappings for better search
  const emojiNames = {
    "ðŸ˜€": "smile grinning face happy joy",
    "ðŸ˜‚": "joy face tears laugh happy joy lol",
    "ðŸ˜Š": "blush smile happy joy",
    "ðŸ˜": "heart eyes love affection",
    "ðŸ¥°": "smiling face with hearts love affection",
    "ðŸ˜˜": "kiss blowing kiss love affection",
    "ðŸ˜‰": "wink playful",
    "ðŸ˜Ž": "cool sunglasses confident",
    "ðŸ¤”": "thinking hmm confused",
    "ðŸ˜®": "surprised wow shocked",
    "ðŸ˜¢": "cry sad tears upset",
    "ðŸ˜­": "sob cry loud sad upset",
    "ðŸ˜¤": "angry mad frustrated",
    "ðŸ˜¡": "rage angry furious",
    "ðŸ¥º": "pleading puppy eyes sad",
    "ðŸ˜´": "sleep sleepy tired",
    "ðŸ¤¯": "exploding head mind blown shocked",
    "ðŸ¥´": "woozy drunk dizzy confused",
    "ðŸ˜µ": "dizzy stars confused",
    "ðŸ¤": "zipper mouth silent quiet",
    "ðŸ˜‹": "yum delicious tasty hungry",
    "ðŸ˜œ": "tongue wink crazy playful",
    "ðŸ¤ª": "zany crazy silly",
    "ðŸ˜": "tongue squint crazy playful",
    "ðŸ¤‘": "money mouth rich greedy",
    "ðŸ¤—": "hug hugging affectionate",
    "ðŸ¤­": "hand mouth giggle shy",
    "ðŸ¤«": "shush quiet silent",
    "ðŸ¤¥": "lie lying dishonest",
    "ðŸ˜¶": "no mouth silent speechless",
    "ðŸ‘": "thumbs up good yes",
    "ðŸ‡¬ðŸ‡ª": "georgia flag country georgian tbilisi caucasus",
    "ðŸ‘Ž": "thumbs down bad no",
    "ðŸ‘Œ": "ok perfect",
    "âœŒï¸": "peace victory",
    "ðŸ¤ž": "fingers crossed luck",
    "ðŸ‘": "clap applause",
    "ðŸ™Œ": "raised hands praise",
    "ðŸ¤": "handshake deal",
    "ðŸ™": "pray please",
    "ðŸ’ª": "muscle strong",
    "ðŸ‘‹": "wave hello",
    "ðŸ¤š": "raised back hand",
    "ðŸ–ï¸": "hand splayed",
    "âœ‹": "raised hand stop",
    "ðŸ––": "vulcan salute spock",
    "ðŸ¤": "pinching hand small",
    "ðŸ¤Ÿ": "love you gesture hand",
    "ðŸ¤˜": "rock on devil horns",
    "ðŸ¤™": "call me hand phone",
    "ðŸ‘ˆ": "point left backhand",
    "ðŸ‘‰": "point right backhand",
    "ðŸ‘†": "point up backhand",
    "ðŸ–•": "middle finger rude",
    "ðŸ‘‡": "point down backhand",
    "â˜ï¸": "index pointing up",
    "â¤ï¸": "heart love red",
    "ðŸ’™": "blue heart",
    "ðŸ’œ": "purple heart",
    "ðŸ’›": "yellow heart",
    "ðŸ’š": "green heart",
    "ðŸ¤": "white heart",
    "ðŸ–¤": "black heart",
    "ðŸ¤Ž": "brown heart",
    "ðŸ’”": "broken heart",
    "â£ï¸": "heart exclamation",
    "ðŸ’•": "two hearts",
    "ðŸ’ž": "revolving hearts",
    "ðŸ’“": "beating heart",
    "ðŸ’—": "growing heart",
    "ðŸ’–": "sparkling heart",
    "ðŸ¶": "dog puppy",
    "ðŸ±": "cat kitten",
    "ðŸ­": "mouse",
    "ðŸ¹": "hamster",
    "ðŸ°": "rabbit bunny",
    "ðŸ¦Š": "fox",
    "ðŸ»": "bear",
    "ðŸ¼": "panda",
    "ðŸ¨": "koala",
    "ðŸ¯": "tiger",
    "ðŸ¦": "lion",
    "ðŸ®": "cow",
    "ðŸ·": "pig",
    "ðŸ¸": "frog",
    "ðŸµ": "monkey",
    "ðŸ•": "pizza",
    "ðŸ”": "burger hamburger",
    "ðŸŸ": "fries french fries",
    "ðŸŒ­": "hot dog",
    "ðŸ¿": "popcorn",
    "ðŸ©": "donut",
    "ðŸª": "cookie",
    "ðŸ§": "cupcake",
    "ðŸ°": "cake",
    "â˜•": "coffee",
    "ðŸº": "beer",
    "ðŸ»": "beers cheers",
    "ðŸ¥‚": "champagne cheers",
    "ðŸ·": "wine",
    "ðŸ¥ƒ": "whiskey",
    "ðŸ¸": "cocktail",
    "ðŸ¹": "tropical drink",
    "ðŸ§‰": "mate",
    "ðŸ¾": "champagne bottle",
    "ðŸ¥¤": "milk glass",
    "ðŸŽ": "apple red fruit",
    "ðŸŠ": "orange fruit citrus",
    "ðŸ‹": "lemon fruit citrus",
    "ðŸŒ": "banana fruit yellow",
    "ðŸ‰": "watermelon fruit",
    "ðŸ‡": "grapes fruit purple",
    "ðŸ“": "strawberry fruit red",
    "ðŸ«": "blueberries fruit blue",
    "ðŸˆ": "melon fruit",
    "ðŸ’": "cherries fruit red",
    "ðŸ‘": "peach fruit",
    "ðŸ¥­": "mango fruit tropical",
    "ðŸ": "pineapple fruit tropical",
    "ðŸ¥¥": "coconut fruit tropical",
    "ðŸ¥": "kiwi fruit green",
    "ðŸ…": "tomato fruit red vegetable",
    "ðŸ†": "eggplant vegetable purple",
    "ðŸ¥‘": "avocado fruit green",
    "ðŸ¥¦": "broccoli vegetable green",
    "ðŸ¥¬": "lettuce vegetable green leafy",
    "âš½": "soccer football",
    "ðŸ€": "basketball",
    "ðŸˆ": "football american",
    "âš¾": "baseball",
    "ðŸŽ¾": "tennis",
    "ðŸ": "volleyball",
    "ðŸ‰": "rugby",
    "ðŸŽ±": "pool billiards",
    "ðŸ“": "ping pong table tennis",
    "ðŸ¸": "badminton",
    "ðŸ¥…": "goal net",
    "ðŸ’": "hockey",
    "ðŸ‘": "field hockey",
    "ðŸ": "cricket",
    "â›³": "golf flag",
    "ðŸš—": "car automobile",
    "ðŸš•": "taxi",
    "ðŸš™": "suv",
    "ðŸšŒ": "bus",
    "ðŸšŽ": "trolleybus",
    "ðŸŽï¸": "racing car",
    "ðŸš“": "police car",
    "ðŸš‘": "ambulance",
    "ðŸš’": "fire truck",
    "ðŸš": "minibus",
    "ðŸšš": "truck",
    "ðŸš›": "articulated lorry",
    "ðŸšœ": "tractor",
    "ðŸï¸": "motorcycle",
    "âœˆï¸": "airplane plane",
    "ðŸ›µ": "motor scooter",
    "ðŸš²": "bicycle bike",
    "ðŸ›´": "kick scooter",
    "ðŸ›¹": "skateboard",
    "ðŸš": "helicopter",
    "ðŸšŸ": "suspension railway",
    "ðŸš ": "mountain cableway",
    "ðŸš¡": "aerial tramway",
    "ðŸ›¤ï¸": "railway track",
    "ðŸ›£ï¸": "motorway",
    "ðŸ—ºï¸": "world map",
    "â›½": "fuel pump gas",
    "ðŸš¨": "police car light siren",
    "ðŸš¥": "traffic light horizontal",
    "ðŸš¦": "traffic light vertical",
    "ðŸ›‘": "stop sign",
    "ðŸš§": "construction",
    "âš“": "anchor",
    "â›µ": "sailboat",
    "ðŸ›¶": "canoe",
    "ðŸš¤": "speedboat",
    "ðŸ›³ï¸": "passenger ship",
    "â›´ï¸": "ferry",
    "ðŸ›¥ï¸": "motor boat",
    "ðŸš¢": "ship",
    "ðŸ›©ï¸": "small airplane",
    "ðŸ›«": "airplane departure",
    "ðŸ›¬": "airplane arrival",
    "ðŸª‚": "parachute",
    "ðŸ’º": "seat",
    "ðŸš€": "rocket",
    "ðŸ›¸": "flying saucer ufo",
    "ðŸšž": "mountain railway",
    "ðŸš": "monorail",
    "ðŸš„": "high speed train",
    "ðŸš…": "bullet train",
    "ðŸšˆ": "light rail",
    "ðŸš‚": "locomotive",
    "ðŸšŠ": "tram",
    "ðŸš‰": "station",
    "ðŸš‡": "metro subway",
    "ðŸ—ï¸": "building construction",
    "ðŸ­": "factory",
    "ðŸ¢": "office building",
    "ðŸ¬": "department store",
    "ðŸ£": "post office",
    "ðŸ¤": "post office european",
    "ðŸ¥": "hospital",
    "ðŸ¦": "bank",
    "ðŸ¨": "hotel",
    "ðŸª": "convenience store",
    "ðŸ«": "school",
    "ðŸ©": "love hotel",
    "ðŸ’’": "wedding chapel",
    "ðŸ›ï¸": "classical building",
    "â›ª": "church",
    "ðŸ•Œ": "mosque",
    "ðŸ•": "synagogue",
    "â›©ï¸": "shinto shrine",
    "ðŸ•‹": "kaaba",
    "â›²": "fountain",
    "â›º": "tent",
    "ðŸŒ": "foggy",
    "ðŸŒƒ": "night with stars",
    "ðŸ™ï¸": "cityscape",
    "ðŸŒ„": "sunrise over mountains",
    "ðŸŒ…": "sunrise",
    "ðŸŒ†": "city at dusk",
    "ðŸŒ‡": "sunset",
    "ðŸŒ‰": "bridge at night",
    "â™¨ï¸": "hot springs",
    "ðŸŽ ": "carousel horse",
    "ðŸŽ¡": "ferris wheel",
    "ðŸŽ¢": "roller coaster",
    "ðŸ’ˆ": "barber pole",
    "ðŸŽª": "circus tent",
    "ðŸ”¥": "fire flame",
    "ðŸ’§": "droplet water",
    "ðŸŒŠ": "water wave",
    "â­": "star",
    "âœ¨": "sparkles",
    "ðŸ’«": "dizzy",
    "ðŸŒŸ": "glowing star",
    "ðŸŒ ": "shooting star",
    "ðŸŽ‡": "sparkler",
    "ðŸŽ†": "fireworks",
    "ðŸŽˆ": "balloon",
    "ðŸŽ‰": "party popper",
    "ðŸŽŠ": "confetti ball",
    "ðŸŽ‚": "birthday cake",
    "ðŸŽ": "wrapped gift",
    "ðŸŽ€": "ribbon",
    "ðŸŽ—ï¸": "reminder ribbon",
    "ðŸŽŸï¸": "admission tickets",
    "ðŸŽ«": "ticket",
    "ðŸŽ–ï¸": "military medal",
    "ðŸ†": "trophy",
    "ðŸ…": "sports medal",
    "ðŸ¥‡": "gold medal",
    "ðŸ¥ˆ": "silver medal",
    "ðŸ¥‰": "bronze medal",
    "ðŸ¥Ž": "softball",
    "ðŸ¥": "flying disc",
    "ðŸª€": "yo yo",
    "ðŸ¥": "lacrosse",
    "ðŸªƒ": "boomerang",
    "ðŸª": "kite",
    "ðŸ¹": "bow and arrow",
    "ðŸŽ£": "fishing pole",
    "ðŸ¤¿": "diving mask",
    "ðŸ¥Š": "boxing glove",
    "ðŸ¥‹": "martial arts uniform",
    "ðŸŽ½": "running shirt",
    "ðŸ›·": "sled",
    "â›¸ï¸": "ice skate",
    "ðŸ¥Œ": "curling stone",
    "ðŸŽ¿": "skis",
    "â›·ï¸": "skier",
    "ðŸ‚": "snowboarder",
    "ðŸ‹ï¸": "weight lifter",
    "ðŸ¤¸": "person cartwheeling gymnastics flip exercise",
    "â›¹ï¸": "person bouncing ball basketball dribble sport",
    "ðŸ¤º": "person fencing sword fight sport",
    "ðŸ¤¾": "person playing handball throw catch sport",
    "ðŸŒï¸": "person golfing golf club swing sport",
    "ðŸ§˜": "person in lotus position yoga meditate relax",
    "ðŸƒ": "person running jog sprint exercise",
    "ðŸš¶": "person walking stroll hike exercise",
    "ðŸ§Ž": "person kneeling pray kneel down",
    "ðŸ§": "person standing wait stand up",
    "ðŸ¤¸â€â™€ï¸": "woman cartwheeling",
    "ðŸ¤¸â€â™‚ï¸": "man cartwheeling",
    "ðŸ¤¼": "people wrestling",
    "ðŸ¤½": "person playing water polo",
    "ðŸ¤¾â€â™€ï¸": "woman playing handball",
    "ðŸ¤¾â€â™‚ï¸": "man playing handball",
    "â›¹ï¸â€â™€ï¸": "woman bouncing ball",
    "â›¹ï¸â€â™‚ï¸": "man bouncing ball",
    "ðŸŒï¸â€â™€ï¸": "woman golfing",
    "ðŸŒï¸â€â™‚ï¸": "man golfing",
    "ðŸ‹ï¸â€â™€ï¸": "woman lifting weights",
    "ðŸ‹ï¸â€â™‚ï¸": "man lifting weights",
    "ðŸŽ­": "performing arts",
    "ðŸŽ¨": "artist palette",
    "ðŸŽ¬": "clapper board",
    "ðŸŽ¤": "microphone",
    "ðŸŽ§": "headphone",
    "ðŸŽ¼": "musical score",
    "ðŸŽ¹": "musical keyboard",
    "ðŸ¥": "drum",
    "ðŸª˜": "long drum",
    "ðŸŽ·": "saxophone",
    "ðŸŽº": "trumpet",
    "ðŸª—": "accordion",
    "ðŸŽ¸": "guitar",
    "ðŸª•": "banjo",
    "ðŸŽ»": "violin",
    "ðŸŽ²": "game die",
    "â™ ï¸": "spade suit",
    "â™¥ï¸": "heart suit",
    "â™¦ï¸": "diamond suit",
    "â™£ï¸": "club suit",
    "ðŸƒ": "joker",
    "ðŸ€„": "mahjong red dragon",
    "ðŸŽ´": "flower playing cards",
    "ðŸŽ¯": "bullseye dart",
    "ðŸŽ³": "bowling",
    "ðŸŽ®": "video game",
    "ðŸ•¹ï¸": "joystick",
    "ðŸŽ°": "slot machine",
    "â˜€ï¸": "sun sunny",
    "ðŸŒ¤ï¸": "sun behind small cloud",
    "â›…": "sun behind cloud",
    "â˜ï¸": "cloud",
    "ðŸŒ§ï¸": "cloud with rain",
    "â›ˆï¸": "cloud with lightning",
    "ðŸŒ©ï¸": "cloud with lightning",
    "â„ï¸": "snowflake",
    "ðŸŒ¨ï¸": "cloud with snow",
    "ðŸŒˆ": "rainbow",
    "ðŸŒ‚": "closed umbrella",
    "â˜‚ï¸": "umbrella",
    "â›±ï¸": "umbrella on ground",
    "ðŸŒ«ï¸": "fog",
    "ðŸŒªï¸": "tornado",
    "ðŸŒ¬ï¸": "wind face",
    "ðŸŒ€": "cyclone",
    "ðŸŒ¥ï¸": "sun behind large cloud",
    "ðŸŒ¦ï¸": "sun behind rain cloud",
    "ðŸŒ¡ï¸": "thermometer",
    "ðŸ": "chequered flag racing finish",
    "ðŸš©": "triangular flag",
    "ðŸŽŒ": "crossed flags japan",
    "ðŸ´": "black flag",
    "ðŸ³ï¸": "white flag",
    "ðŸ³ï¸â€ðŸŒˆ": "rainbow flag pride lgbt",
    "ðŸ³ï¸â€âš§ï¸": "transgender flag",
    "ðŸ´â€â˜ ï¸": "pirate flag skull crossbones",
    "ðŸ‡ºðŸ‡¸": "united states america usa flag",
    "ðŸ‡¬ðŸ‡§": "united kingdom great britain uk flag",
    "ðŸ‡¨ðŸ‡¦": "canada flag",
    "ðŸ‡¦ðŸ‡º": "australia flag",
    "ðŸ‡©ðŸ‡ª": "germany flag",
    "ðŸ‡«ðŸ‡·": "france flag",
    "ðŸ‡®ðŸ‡¹": "italy flag",
    "ðŸ‡¯ðŸ‡µ": "japan flag",
    "ðŸ‡°ðŸ‡·": "south korea flag",
    "ðŸ‡¨ðŸ‡³": "china flag",
    "ðŸ‡®ðŸ‡³": "india flag",
    "ðŸ‡§ðŸ‡·": "brazil flag",
    "ðŸ‡·ðŸ‡º": "russia flag",
    "ðŸ‡ªðŸ‡¸": "spain flag",
    "ðŸ‡³ðŸ‡±": "netherlands flag",
    "ðŸ‡§ðŸ‡ª": "belgium flag",
    "ðŸ‡¨ðŸ‡­": "switzerland flag",
    "ðŸ‡¦ðŸ‡¹": "austria flag",
    "ðŸ‡¸ðŸ‡ª": "sweden flag",
    "ðŸ‡³ðŸ‡´": "norway flag",
    "ðŸ‡©ðŸ‡°": "denmark flag",
    "ðŸ‡«ðŸ‡®": "finland flag",
    "ðŸ‡µðŸ‡±": "poland flag",
    "ðŸ‡¨ðŸ‡¿": "czech republic flag",
    "ðŸ‡­ðŸ‡º": "hungary flag",
    "ðŸ‡µðŸ‡¹": "portugal flag",
    "ðŸ‡¬ðŸ‡·": "greece flag",
    "ðŸ‡¹ðŸ‡·": "turkey flag",
    "ðŸ‡²ðŸ‡½": "mexico flag",
    "ðŸ‡¦ðŸ‡·": "argentina flag",
    "ðŸ‡¨ðŸ‡´": "colombia flag",
    "ðŸ‡¨ðŸ‡±": "chile flag",
    "ðŸ‡µðŸ‡ª": "peru flag",
    "ðŸ‡»ðŸ‡ª": "venezuela flag",
    "ðŸ‡ªðŸ‡¨": "ecuador flag",
    "ðŸ‡ºðŸ‡¾": "uruguay flag",
    "ðŸ‡µðŸ‡¾": "paraguay flag",
    "ðŸ‡§ðŸ‡´": "bolivia flag",
    "ðŸ‡¸ðŸ‡»": "el salvador flag",
    "ðŸ‡¬ðŸ‡¹": "guatemala flag",
    "ðŸ‡­ðŸ‡³": "honduras flag",
    "ðŸ‡³ðŸ‡®": "nicaragua flag",
    "ðŸ‡¨ðŸ‡·": "costa rica flag",
    "ðŸ‡µðŸ‡¦": "panama flag",
    "ðŸ‡©ðŸ‡´": "dominican republic flag",
    "ðŸ‡¯ðŸ‡²": "jamaica flag",
    "ðŸ‡­ðŸ‡¹": "haiti flag",
    "ðŸ‡¨ðŸ‡º": "cuba flag",
    "ðŸ‡µðŸ‡·": "puerto rico flag",
    "ðŸ‡§ðŸ‡§": "barbados flag",
    "ðŸ‡¹ðŸ‡¹": "trinidad tobago flag",
    "ðŸ‡¬ðŸ‡¾": "guyana flag",
    "ðŸ‡¸ðŸ‡·": "suriname flag",
    "ðŸ‡¦ðŸ‡¼": "aruba flag",
    "ðŸ‡§ðŸ‡¶": "caribbean netherlands flag",
    "ðŸ‡¨ðŸ‡¼": "curacao flag",
    "ðŸ‡¸ðŸ‡½": "sint maarten flag",
    "ðŸ‡§ðŸ‡±": "saint barthelemy flag",
    "ðŸ‡¬ðŸ‡«": "french guiana flag",
    "ðŸ‡¬ðŸ‡µ": "guadeloupe flag",
    "ðŸ‡²ðŸ‡¶": "martinique flag",
    "ðŸ‡¾ðŸ‡¹": "mayotte flag",
    "ðŸ‡·ðŸ‡ª": "reunion flag",
    "ðŸ‡µðŸ‡«": "french polynesia flag",
    "ðŸ‡³ðŸ‡¨": "new caledonia flag",
    "ðŸ‡¼ðŸ‡«": "wallis futuna flag",
    "ðŸ‡µðŸ‡²": "saint pierre miquelon flag",
    "ðŸ‡¬ðŸ‡±": "greenland flag",
    "ðŸ‡«ðŸ‡´": "faroe islands flag",
    "ðŸ‡¦ðŸ‡½": "aland islands flag",
    "ðŸ‡®ðŸ‡¸": "iceland flag",
    "ðŸ‡®ðŸ‡ª": "ireland flag",
    "ðŸ‡±ðŸ‡º": "luxembourg flag",
    "ðŸ‡²ðŸ‡¨": "monaco flag",
    "ðŸ‡±ðŸ‡®": "liechtenstein flag",
    "ðŸ‡¦ðŸ‡©": "andorra flag",
    "ðŸ‡¸ðŸ‡²": "san marino flag",
    "ðŸ‡»ðŸ‡¦": "vatican city flag",
    "ðŸ‡²ðŸ‡¹": "malta flag",
    "ðŸ‡¨ðŸ‡¾": "cyprus flag",
    "ðŸ‡§ðŸ‡¬": "bulgaria flag",
    "ðŸ‡·ðŸ‡´": "romania flag",
    "ðŸ‡­ðŸ‡·": "croatia flag",
    "ðŸ‡¸ðŸ‡®": "slovenia flag",
    "ðŸ‡²ðŸ‡ª": "montenegro flag",
    "ðŸ‡·ðŸ‡¸": "serbia flag",
    "ðŸ‡²ðŸ‡°": "north macedonia flag",
    "ðŸ‡¦ðŸ‡±": "albania flag",
    "ðŸ‡½ðŸ‡°": "kosovo flag",
    "ðŸ‡§ðŸ‡¦": "bosnia herzegovina flag",
    "ðŸ‡²ðŸ‡©": "moldova flag",
    "ðŸ‡ªðŸ‡ª": "estonia flag",
    "ðŸ‡±ðŸ‡»": "latvia flag",
    "ðŸ‡±ðŸ‡¹": "lithuania flag",
    "ðŸ‡§ðŸ‡¾": "belarus flag",
    "ðŸ‡ºðŸ‡¦": "ukraine flag",
    "ðŸ‡¦ðŸ‡²": "armenia flag",
    "ðŸ‡¦ðŸ‡¿": "azerbaijan flag",
    "ðŸ‡°ðŸ‡¿": "kazakhstan flag",
    "ðŸ‡°ðŸ‡¬": "kyrgyzstan flag",
    "ðŸ‡¹ðŸ‡¯": "tajikistan flag",
    "ðŸ‡¹ðŸ‡²": "turkmenistan flag",
    "ðŸ‡ºðŸ‡¿": "uzbekistan flag",
    "ðŸ‡²ðŸ‡³": "mongolia flag",
    "ðŸ‡°ðŸ‡µ": "north korea flag",
    "ðŸ‡¹ðŸ‡¼": "taiwan flag",
    "ðŸ‡­ðŸ‡°": "hong kong flag",
    "ðŸ‡²ðŸ‡´": "macau flag",
    "ðŸ‡¯ðŸ‡´": "jordan flag",
    "ðŸ‡±ðŸ‡§": "lebanon flag",
    "ðŸ‡¸ðŸ‡¾": "syria flag",
    "ðŸ‡®ðŸ‡¶": "iraq flag",
    "ðŸ‡°ðŸ‡¼": "kuwait flag",
    "ðŸ‡¸ðŸ‡¦": "saudi arabia flag",
    "ðŸ‡§ðŸ‡­": "bahrain flag",
    "ðŸ‡¶ðŸ‡¦": "qatar flag",
    "ðŸ‡¦ðŸ‡ª": "united arab emirates flag",
    "ðŸ‡´ðŸ‡²": "oman flag",
    "ðŸ‡¾ðŸ‡ª": "yemen flag",
    "ðŸ‡®ðŸ‡±": "israel flag",
    "ðŸ‡µðŸ‡¸": "palestine flag",
    "ðŸ‡ªðŸ‡¬": "egypt flag",
    "ðŸ‡±ðŸ‡¾": "libya flag",
    "ðŸ‡©ðŸ‡¿": "algeria flag",
    "ðŸ‡²ðŸ‡¦": "morocco flag",
    "ðŸ‡¹ðŸ‡³": "tunisia flag",
    "ðŸ‡ªðŸ‡­": "western sahara flag",
    "ðŸ‡²ðŸ‡·": "mauritania flag",
    "ðŸ‡²ðŸ‡±": "mali flag",
    "ðŸ‡¸ðŸ‡³": "senegal flag",
    "ðŸ‡¬ðŸ‡²": "gambia flag",
    "ðŸ‡¬ðŸ‡³": "guinea flag",
    "ðŸ‡¸ðŸ‡±": "sierra leone flag",
    "ðŸ‡±ðŸ‡·": "liberia flag",
    "ðŸ‡¨ðŸ‡®": "ivory coast flag",
    "ðŸ‡§ðŸ‡«": "burkina faso flag",
    "ðŸ‡¹ðŸ‡¬": "togo flag",
    "ðŸ‡§ðŸ‡¯": "benin flag",
    "ðŸ‡³ðŸ‡ª": "niger flag",
    "ðŸ‡³ðŸ‡¬": "nigeria flag",
    "ðŸ‡¹ðŸ‡©": "chad flag",
    "ðŸ‡¨ðŸ‡²": "cameroon flag",
    "ðŸ‡¨ðŸ‡«": "central african republic flag",
    "ðŸ‡¬ðŸ‡¦": "gabon flag",
    "ðŸ‡¨ðŸ‡¬": "congo flag",
    "ðŸ‡¦ðŸ‡´": "angola flag",
    "ðŸ‡¬ðŸ‡¶": "equatorial guinea flag",
    "ðŸ‡¸ðŸ‡¹": "sao tome principe flag",
    "ðŸ‡¨ðŸ‡»": "cape verde flag",
    "ðŸ‡¬ðŸ‡¼": "guinea bissau flag",
    "ðŸ‡§ðŸ‡®": "burundi flag",
    "ðŸ‡·ðŸ‡¼": "rwanda flag",
    "ðŸ‡¹ðŸ‡¿": "tanzania flag",
    "ðŸ‡°ðŸ‡ª": "kenya flag",
    "ðŸ‡ºðŸ‡¬": "uganda flag",
    "ðŸ‡¸ðŸ‡´": "somalia flag",
    "ðŸ‡©ðŸ‡¯": "djibouti flag",
    "ðŸ‡ªðŸ‡¹": "ethiopia flag",
    "ðŸ‡ªðŸ‡·": "eritrea flag",
    "ðŸ‡¸ðŸ‡¸": "south sudan flag",
    "ðŸ‡¸ðŸ‡©": "sudan flag",
    "ðŸ‡¿ðŸ‡¦": "south africa flag",
    "ðŸ‡§ðŸ‡¼": "botswana flag",
    "ðŸ‡¿ðŸ‡²": "zambia flag",
    "ðŸ‡¿ðŸ‡¼": "zimbabwe flag",
    "ðŸ‡²ðŸ‡¼": "malawi flag",
    "ðŸ‡²ðŸ‡¿": "mozambique flag",
    "ðŸ‡¸ðŸ‡¿": "eswatini flag",
    "ðŸ‡±ðŸ‡¸": "lesotho flag",
    "ðŸ‡³ðŸ‡¦": "namibia flag",
    "ðŸ‡²ðŸ‡¬": "madagascar flag",
    "ðŸ‡²ðŸ‡º": "mauritius flag",
    "ðŸ‡¸ðŸ‡¨": "seychelles flag",
    "ðŸ‡¹ðŸ‡´": "tonga flag",
    "ðŸ‡¼ðŸ‡¸": "samoa flag",
    "ðŸ‡¸ðŸ‡§": "solomon islands flag",
    "ðŸ‡»ðŸ‡º": "vanuatu flag",
    "ðŸ‡³ðŸ‡·": "nauru flag",
    "ðŸ‡¹ðŸ‡»": "tuvalu flag",
    "ðŸ‡°ðŸ‡®": "kiribati flag",
    "ðŸ‡²ðŸ‡­": "marshall islands flag",
    "ðŸ‡µðŸ‡¼": "palau flag",
    "ðŸ‡«ðŸ‡²": "micronesia flag",
    "ðŸ‡²ðŸ‡µ": "northern mariana islands flag",
    "ðŸ‡¬ðŸ‡º": "guam flag",
    "ðŸ‡¦ðŸ‡¸": "american samoa flag",
    "ðŸ‡»ðŸ‡®": "us virgin islands flag",
    "ðŸ‡ºðŸ‡²": "us minor outlying islands flag",
    "ðŸ‡²ðŸ‡¸": "montserrat flag",
    "ðŸ‡¹ðŸ‡¨": "turks caicos islands flag",
    "ðŸ‡»ðŸ‡¬": "british virgin islands flag",
    "ðŸ‡§ðŸ‡²": "bermuda flag",
    "ðŸ‡°ðŸ‡¾": "cayman islands flag",
    "ðŸ‡¦ðŸ‡®": "anguilla flag",
    "ðŸ‡«ðŸ‡°": "falkland islands flag",
    "ðŸ‡¬ðŸ‡¸": "south georgia south sandwich islands flag",
    "ðŸ‡¸ðŸ‡­": "saint helena flag",
    "ðŸ‡®ðŸ‡´": "british indian ocean territory flag",
    "ðŸ‡µðŸ‡³": "pitcairn islands flag",
    "ðŸ¥’": "cucumber vegetable",
    "ðŸ§„": "garlic vegetable",
    "ðŸ§…": "onion vegetable",
    "ðŸ¥•": "carrot vegetable orange",
    "ðŸŒ½": "corn vegetable maize",
    "ðŸŒ¶ï¸": "pepper hot spicy vegetable",
    "ðŸ«‘": "bell pepper vegetable",
    "ðŸ„": "mushroom vegetable fungus",
    "ðŸ¥œ": "peanuts nuts legume",
    "ðŸŒ°": "chestnut nut",
    "ðŸ ": "sweet potato vegetable",
    "ðŸ¥”": "potato vegetable",
    "ðŸ¥š": "egg protein breakfast",
    "ðŸ³": "cooking egg breakfast",
    "ðŸ¥“": "bacon pork breakfast",
    "ðŸ¥©": "steak meat beef",
    "ðŸ—": "chicken leg poultry",
    "ðŸ–": "meat bone protein",
    "ðŸ”": "chicken poultry",
    "ðŸŸ": "fish seafood",
    "ðŸ ": "tropical fish aquarium",
    "ðŸ¡": "blowfish puffer fish",
    "ðŸ¦€": "crab seafood",
    "ðŸ¦ž": "lobster seafood",
    "ðŸ¦": "shrimp seafood",
    "ðŸ¦‘": "squid seafood",
    "ðŸ¦ª": "oyster seafood",
    "ðŸ™": "octopus seafood",
    "ðŸš": "shell seafood",
    "ðŸ§€": "cheese dairy",
    "ðŸ¥›": "milk dairy",
    "ðŸ¼": "baby bottle milk",
    "ðŸž": "bread baked",
    "ðŸ¥–": "baguette bread french",
    "ðŸ¥¨": "pretzel bread german",
    "ðŸ¥¯": "bagel bread",
    "ðŸ¥": "croissant bread pastry",
    "ðŸ¥ž": "pancake breakfast",
    "ðŸ§‡": "waffle breakfast",
    "ðŸ¥Ÿ": "dumpling chinese",
    "ðŸ¥ ": "fortune cookie chinese",
    "ðŸ¥¡": "takeout box chinese",
    "ðŸ±": "bento box japanese",
    "ðŸ˜": "rice cracker japanese",
    "ðŸ™": "rice ball onigiri japanese",
    "ðŸš": "cooked rice japanese",
    "ðŸ›": "curry rice indian",
    "ðŸœ": "ramen noodle soup japanese",
    "ðŸ": "spaghetti pasta italian",
    "ðŸ¢": "oden japanese",
    "ðŸ£": "sushi japanese",
    "ðŸ¤": "fried shrimp tempura japanese",
    "ðŸ¥": "fish cake narutomaki japanese",
    "ðŸ¥®": "moon cake chinese",
    "ðŸ¥§": "pie dessert",
    "ðŸ¦": "ice cream dessert",
    "ðŸ¨": "ice cream dessert",
    "ðŸ«": "chocolate dessert",
    "ðŸ¬": "candy dessert",
    "ðŸ­": "lollipop candy",
    "ðŸ®": "custard dessert",
    "ðŸ¯": "honey sweet",
    "ðŸ«–": "teapot tea",
    "ðŸµ": "tea cup",
    "ðŸ§ƒ": "juice box drink",
    "ðŸ§‹": "bubble tea boba",
    "ðŸ¶": "sake japanese",
    "ðŸ¥„": "spoon utensil",
    "ðŸ´": "fork knife utensil",
    "ðŸ½ï¸": "plate utensil",
    "ðŸ¥™": "shawarma middle eastern",
    "ðŸŒ¯": "burrito mexican",
    "ðŸ¥—": "salad green",
    "ðŸ¥˜": "paella spanish",
    "ðŸ«•": "fondue swiss",
    "ðŸ¥«": "canned food",
    "ðŸ²": "stew soup",
    "ðŸ‡¨ðŸ‡½": "christmas island flag",
    "ðŸ‡¨ðŸ‡¨": "cocos islands flag",
    "ðŸ‡³ðŸ‡«": "norfolk island flag",
    "ðŸ‡¦ðŸ‡¶": "antarctica flag",
    "ðŸ‡§ðŸ‡»": "bouvet island flag",
    "ðŸ‡­ðŸ‡²": "heard mcdonald islands flag",
    "ðŸ˜ƒ": "grinning face with big eyes",
    "ðŸ˜„": "grinning face with smiling eyes",
    "ðŸ˜": "beaming face with smiling eyes",
    "ðŸ˜†": "grinning squinting face",
    "ðŸ˜…": "grinning face with sweat",
    "ðŸ¤£": "rolling on the floor laughing",
    "ðŸ™‚": "slightly smiling face",
    "ðŸ™ƒ": "upside-down face",
    "ðŸ˜‡": "smiling face with halo",
    "ðŸ¤©": "star-struck",
    "ðŸ˜—": "kissing face",
    "â˜ºï¸": "smiling face",
    "ðŸ˜š": "kissing face with closed eyes",
    "ðŸ˜™": "kissing face with smiling eyes",
    "ðŸ¥²": "smiling face with tear",
    "ðŸ˜›": "face with tongue",
    "ðŸ¤¨": "raised eyebrow",
    "ðŸ˜": "neutral face",
    "ðŸ˜‘": "expressionless face",
    "ðŸ™„": "face with rolling eyes",
    "ðŸ˜": "smirking face",
    "ðŸ˜’": "unamused face",
    "ðŸ™": "slightly frowning face",
    "â˜¹ï¸": "frowning face",
    "ðŸ˜”": "pensive face",
    "ðŸ˜ª": "sleepy face",
    "ðŸ˜·": "face with medical mask",
    "ðŸ¤’": "face with thermometer",
    "ðŸ¤•": "face with head-bandage",
    "ðŸ¤¢": "nauseated face",
    "ðŸ¤®": "face vomiting",
    "ðŸ¤§": "sneezing face",
    "ðŸ¥µ": "hot face",
    "ðŸ¥¶": "cold face",
    "ðŸ˜µâ€ðŸ’«": "face with spiral eyes",
    "ðŸ¤ ": "cowboy hat face",
    "ðŸ¥³": "partying face",
    "ðŸ¥¸": "disguised face",
    "ðŸ¤“": "nerd face",
    "ðŸ§": "face with monocle",
    "ðŸ˜•": "confused face",
    "ðŸ˜Ÿ": "worried face",
    "ðŸ˜¯": "hushed face",
    "ðŸ˜²": "astonished face",
    "ðŸ˜³": "flushed face",
    "ðŸ˜¦": "frowning face with open mouth",
    "ðŸ˜§": "anguished face",
    "ðŸ˜¨": "fearful face",
    "ðŸ˜°": "anxious face with sweat",
    "ðŸ˜¥": "sad but relieved face",
    "ðŸ˜±": "face screaming in fear",
    "ðŸ˜–": "confounded face",
    "ðŸ˜£": "persevering face",
    "ðŸ˜ž": "disappointed face",
    "ðŸ˜“": "downcast face with sweat",
    "ðŸ˜©": "weary face",
    "ðŸ˜«": "tired face",
    "ðŸ¥±": "yawning face",
    "ðŸ˜ ": "angry face",
    "ðŸ¤¬": "face with symbols on mouth",
    "ðŸ˜ˆ": "devil",
    "ðŸ‘¿": "angry devil",
    "ðŸ’€": "skull",
    "â˜ ï¸": "skull and crossbones",
    "ðŸ‘»": "ghost",
    "ðŸ‘½": "alien",
    "ðŸ¤–": "robot",
    "ðŸ˜º": "grinning cat",
    "ðŸ˜¸": "grinning cat with smiling eyes",
    "ðŸ˜¹": "cat with tears of joy",
    "ðŸ˜»": "smiling cat with heart-eyes",
    "ðŸ˜¼": "cat with wry smile",
    "ðŸ˜½": "kissing cat",
    "ðŸ™€": "weary cat",
    "ðŸ˜¿": "crying cat",
    "ðŸ˜¾": "pouting cat",
    "ðŸ™ˆ": "see-no-evil monkey",
    "ðŸ™‰": "hear-no-evil monkey",
    "ðŸ™Š": "speak-no-evil monkey",
    "ðŸ‡¹ðŸ‡«": "french southern territories flag"
  };

  // Optimized emoji filtering with memoization
  const filteredEmojis = useMemo(() => {
    if (!searchQuery.trim()) return emojis;

    const query = searchQuery.toLowerCase().trim();
    const queryWords = query.split(' ').filter(word => word.length > 0);

    return emojis.filter(emoji => {
      const emojiName = (emojiNames[emoji] || "").toLowerCase();
      const emojiChar = emoji.toLowerCase();

      // Check if all query words match
      return queryWords.every(word =>
        emojiName.includes(word) ||
        emojiChar.includes(word) ||
        emoji.codePointAt(0).toString(16).includes(word.replace('u+', ''))
      );
    });
  }, [searchQuery]);


  // Memoized Emoji Button Component for better performance
  const EmojiButton = memo(({ emoji, index, onClick }) => (
    <m.button
      className="EmojiButton"
      onClick={() => onClick(emoji)}
      whileHover={{ scale: 1.1 }}
      whileTap={{ scale: 0.95 }}
      initial={{ opacity: 0, scale: 0.8 }}
      animate={{ opacity: 1, scale: 1 }}
      transition={{
        duration: 0.2,
        delay: Math.min(index * 0.002, 0.1) // Much faster animation, max 100ms delay
      }}
    >
      {flagMapping[emoji] && flagMapping[emoji] !== null ? (
        <span
          className={flagMapping[emoji]}
          style={{ fontSize: '16px', minWidth: '16px', minHeight: '16px' }}
          title={emoji}
        />
      ) : (
        <span style={{ fontSize: '16px' }} title={emoji}>{emoji}</span>
      )}
    </m.button>
  ));


  if (!isOpen) return null;

  return (
    <m.div
      initial={{ opacity: 0, scale: 0.9, y: 5 }}
      animate={{ opacity: 1, scale: 1, y: 0 }}
      exit={{ opacity: 0, scale: 0.9, y: 5 }}
      transition={{ duration: 0.15, ease: "easeOut" }}
      className="EmojiPicker"
      onClick={(e) => e.stopPropagation()}
    >
      <div className="EmojiPickerHeader">
        <div className="HeaderTop">
          <h3>Pick an emoji</h3>
          <button className="CloseButton" onClick={onClose}>Ã—</button>
        </div>
        <div className="SearchContainer">
          <input
            type="text"
            placeholder="Search emojis..."
            value={searchQuery}
            onChange={handleSearchChange}
            className="EmojiSearchInput"
          />
        </div>
      </div>
      <div className="EmojiGrid">
        {filteredEmojis.length > 0 ? (
          filteredEmojis.map((emoji, index) => (
            <EmojiButton
              key={`${emoji}-${index}`}
              emoji={emoji}
              index={index}
              onClick={handleEmojiClick}
            />
          ))
        ) : (
          <div className="NoEmojisFound">
            <p>No emojis found for "{searchQuery}"</p>
          </div>
        )}
      </div>
    </m.div>
  );
}